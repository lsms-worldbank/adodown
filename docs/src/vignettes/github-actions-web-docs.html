<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>adodown – github-actions-web-docs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <img src="../../images/logo.png" alt="">
    <span class="navbar-title">adodown</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../reference/index.html">Reference</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-articles" role="button" data-bs-toggle="dropdown" aria-expanded="false">Articles</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-articles">    
        <li>
    <a class="dropdown-item" href="../../articles/adodown-workflow.html">
 <span class="dropdown-text">adodown-workflow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../articles/github-actions-web-docs.html">
 <span class="dropdown-text">github-actions-web-docs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../articles/mdhlp-syntax.html">
 <span class="dropdown-text">mdhlp-syntax</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lsms-worldbank/adodown"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#build-and-deploy-web-documentation" id="toc-build-and-deploy-web-documentation" class="nav-link active" data-scroll-target="#build-and-deploy-web-documentation">Build and deploy web documentation</a>
  <ul class="collapse">
  <li><a href="#github-requirements" id="toc-github-requirements" class="nav-link" data-scroll-target="#github-requirements">GitHub requirements</a></li>
  <li><a href="#adodown---github-pages---step-by-step-guide" id="toc-adodown---github-pages---step-by-step-guide" class="nav-link" data-scroll-target="#adodown---github-pages---step-by-step-guide">adodown - GitHub pages - step-by-step guide</a>
  <ul class="collapse">
  <li><a href="#step-1---enable-github-pages" id="toc-step-1---enable-github-pages" class="nav-link" data-scroll-target="#step-1---enable-github-pages">Step 1 - Enable GitHub Pages</a></li>
  <li><a href="#step-2---authenticate-github-actions" id="toc-step-2---authenticate-github-actions" class="nav-link" data-scroll-target="#step-2---authenticate-github-actions">Step 2 - Authenticate GitHub Actions</a></li>
  <li><a href="#step-3---add-the-github-action-workflow" id="toc-step-3---add-the-github-action-workflow" class="nav-link" data-scroll-target="#step-3---add-the-github-action-workflow">Step 3 - Add the GitHub Action Workflow</a></li>
  <li><a href="#view-the-web-site" id="toc-view-the-web-site" class="nav-link" data-scroll-target="#view-the-web-site">View the web site</a></li>
  </ul></li>
  <li><a href="#optional-steps" id="toc-optional-steps" class="nav-link" data-scroll-target="#optional-steps">Optional steps</a>
  <ul class="collapse">
  <li><a href="#add-a-your-own-logo-icon" id="toc-add-a-your-own-logo-icon" class="nav-link" data-scroll-target="#add-a-your-own-logo-icon">Add a your own logo icon</a></li>
  </ul></li>
  <li><a href="#web-documentation-in-other-locations" id="toc-web-documentation-in-other-locations" class="nav-link" data-scroll-target="#web-documentation-in-other-locations">Web documentation in other locations</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="build-and-deploy-web-documentation" class="level1">
<h1>Build and deploy web documentation</h1>
<p>One of the main motivations for the <code>adodown</code> workflow is to make it easy to generate user-friendly web documentation. Web documentation creates a web site where users can browse documentation without first having to install the package from, for example, SSC. It also allows you to write supporting documentation that are not exactly help files. Such as this page you are reading right now.</p>
<p>While encouraged, generating web documentation is optional in the <code>adodown</code> workflow. It is perfectly possible to use <code>adodown</code> to benefit from standardized Stata package practices without using web documentation. If you do not want to generate web documentation, then there is no need for you to follow the steps in this guide.</p>
<section id="github-requirements" class="level2">
<h2 class="anchored" data-anchor-id="github-requirements">GitHub requirements</h2>
<p>This guide assumes you host your <code>adodown</code> styled Stata package in a GitHub repository and that you will publish your web documentation using GitHub Pages. If this does not apply to you, see the last section of this page for other options.</p>
<p>On GitHub this workflow use GitHub actions to publish the GitHub page. At the time of writing this documentation, GitHub actions were free on public repositories. But please confirm this at <a href="https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions">GitHub Actions pricing page</a>.</p>
</section>
<section id="adodown---github-pages---step-by-step-guide" class="level2">
<h2 class="anchored" data-anchor-id="adodown---github-pages---step-by-step-guide">adodown - GitHub pages - step-by-step guide</h2>
<p>To enable <code>adodown</code> to publish web documentation you need to complete three steps. There is no requirement on the order you do the steps, but unless the order below is used, you will get error notifications until all steps are completed.</p>
<section id="step-1---enable-github-pages" class="level3">
<h3 class="anchored" data-anchor-id="step-1---enable-github-pages">Step 1 - Enable GitHub Pages</h3>
<p>You typically need admin access to your repo to complete these step. Click on the repository <em>Settings</em> tab or go to <code>https://github.com/&lt;account_name&gt;/&lt;repo_name&gt;/settings</code>. If you cannot access this page you do not have admin access to this repo.</p>
<p>Then go to <em>Pages</em> &gt;&gt; <em>Build and Deployment</em> &gt;&gt; <em>Source</em>. Then select <em>GitHub Actions</em> in the drop-down.</p>
</section>
<section id="step-2---authenticate-github-actions" class="level3">
<h3 class="anchored" data-anchor-id="step-2---authenticate-github-actions">Step 2 - Authenticate GitHub Actions</h3>
<p>You need to create a personal access token to allow a GitHub Action to publish a GitHub Page.</p>
<p>Go to your GitHub profile settings by clicking your profile picture and then select <em>Settings</em>. Then navigate to <em>Developer settings</em> &gt;&gt; <em>Personal access tokens</em> &gt;&gt; <em>Fine-grained tokens</em> &gt;&gt; <em>Generate new token</em>. Select <em>Generate New Token (Classic)</em>.</p>
<p>You can name this token anything but name it something that makes you know what it is used for. In the GitHub Action this token will be called <em>ACTIONS_DEPLOY_KEY</em> so you can use the same name (<em>Note</em>) here. You also need to generate an expiration date for this token. After the token expires, you need to come back and repeat this step.</p>
<p>You then have to define a scope for this token. You can select “Repo”. Then click generate token.</p>
<p>Store this token in a secure place like a password manager. If someone gets access to your key, then they can impersonate you on GitHub. You will never again be able to make GitHub to show it to you. If you lose access to the key, then you will have to repeat this step and generate a new key.</p>
</section>
<section id="step-3---add-the-github-action-workflow" class="level3">
<h3 class="anchored" data-anchor-id="step-3---add-the-github-action-workflow">Step 3 - Add the GitHub Action Workflow</h3>
<p>If you are starting a new <code>adodown</code> project then, run <code>ad_setup</code> and say yes when asked if you want to set up GitHub templates. Once this is done you only need to push a commit and the web documentation will be published. The web documentation will then be updated each time you push anything to the <code>main</code>/<code>master</code> branch.</p>
<p>If you had already set up your <code>adodown</code> package, and if you opt-in to create the GitHub templates, then the web documentation will update each time you push anything to the <code>main</code>/<code>master</code> branch.</p>
<p>If you had already set up your <code>adodown</code> package, but you did not opt-in for the GitHub templates, then you need to set up the workflow file manually. To do so, copy the content on <a href="https://raw.githubusercontent.com/lsms-worldbank/adodown/main/src/ado/templates/ad-gh-workflows.yaml">this page</a> into a file you save under the exact path <code>.github/workflows/build_adodown_site.yaml</code>. Then push this in a commit and the web documentation will be published. The web documentation will then be updated each time you push anything to the <code>main</code>/<code>master</code> branch.</p>
</section>
<section id="view-the-web-site" class="level3">
<h3 class="anchored" data-anchor-id="view-the-web-site">View the web site</h3>
<p>Wait a minute or two after completing all the three steps above and then go to <code>https://github.com/&lt;account_name&gt;/&lt;repo_name&gt;/settings/pages</code>. The URL to the web based documentation is then listed at the top of the page.</p>
</section>
</section>
<section id="optional-steps" class="level2">
<h2 class="anchored" data-anchor-id="optional-steps">Optional steps</h2>
<section id="add-a-your-own-logo-icon" class="level3">
<h3 class="anchored" data-anchor-id="add-a-your-own-logo-icon">Add a your own logo icon</h3>
<p>The <a href="https://github.com/arthur-shaw/adodown">R tool adodownr</a> used to build this web documentation allows you to add a custom logo to the web browser tab of your web documentation. To do so, save the logo in a square sized <code>.png</code> file called <code>logo.png</code>. Save the file in <code>/src/dev/assets/logo.png</code>. Push the file to the repo and then the web documentation will be recreated with this logo in the web browser tab.</p>
</section>
</section>
<section id="web-documentation-in-other-locations" class="level2">
<h2 class="anchored" data-anchor-id="web-documentation-in-other-locations">Web documentation in other locations</h2>
<p>It is possible to use the <code>adodown(r)</code> tools to generate web documentation even when not using a GitHub repository to host the code or when not using GitHub pages to host documentation. However, then you need to install the R-tool <code>adodownr</code> on your own computer, and run it yourself to build the website. See the documentation for <code>adodownr</code> for more <a href="https://github.com/lsms-worldbank/adodownr">details</a>.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>